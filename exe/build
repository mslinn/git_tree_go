#!/bin/bash

set -e  # Exit on error

# Create bin/ if it doesn't exist
mkdir -p bin

# Build each cmd/ subdirectory
for cmd_dir in cmd/*/main.go; do
  if [[ -f "$cmd_dir" ]]; then
    cmd_name=$(basename "$(dirname "$cmd_dir")")
    echo "Building $cmd_name..."
    go build -o "bin/$cmd_name" "./$(dirname "$cmd_dir")"
  fi
done

echo "All binaries built in bin/"
