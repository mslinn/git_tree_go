---
categories: [ Bash, Git, Ruby ]
date: 2021-04-10
description: Replicate a Git directory tree to other computers.
javascriptEnd: /assets/js/clipboard.min.js
javascriptInline: new ClipboardJS('.copyBtn');
last_modified_at: 2025-10-10
layout: git
order: 1100
redirect_from:
- /blog/2021/04/10/git-tree.html
title: Git Directory Tree Operations
---
<!-- #region intro -->
<p>
  I have several trees of Git repositories, grouped into subdirectories.
  The total number of repositories is in the hundreds.
  Here is a sanitized depiction of one of my Git directory trees:
</p>
<!-- #region directory tree -->
{% pre class='tree' label='Directory tree' wrapper_class='rounded shadow' %}
├── cadenzaHome
│ ├── cadenzaAssets
│ ├── cadenzaCode
│ │ ├── cadenzaClient
│ │ ├── cadenzaCourseCode
│ │ ├── cadenzaDependencies
│ │ ├── cadenzaLibs
│ │ ├── cadenzaServer
│ │ ├── cadenzaServerNext
│ │ └── cadenzaSupport
│ ├── cadenzaCreative
│ │ └── cadenzaCreativeTemplates
│ ├── cadenzaCreativeBackup
│ └── cadenzaCurriculum
├── django
│ ├── django
│ ├── django-oscar
│ ├── frobshop
│ ├── main
│ └── oscar
├── jekyll
│ ├── jekyllTemplate
│ └── jekyll-flexible-include-plugin
{% endpre %}
<!-- endregion -->

{% comment %}
{% jekyll_badge
align='right'
name='git_tree_go'
style='margin-top: 5px;'
%}
{% endcomment %}
<p>
  Some Git repos are forks,
  and I defined <code>upstream</code> Git remotes for them,
  in addition to the usual <code>origin</code> remote.
</p>

<p>
  This article discusses <code>git_tree_go</code>,
  a Go package I wrote to help me work efficiently with multiple trees of Git projects.
</p>
<p>
  This Go package installs commands that walk through one or more git
  directory trees (breadth-first) and act on each repository.
  Directories containing a file called <code>.ignore</code> are ignored, as well as all subdirectories.
  Multiple goroutines are normally used to dramatically boost performance,
  but serial processing is available for deterministic results.
</p>
<!-- endregion -->


<!-- #region Command Summary -->
<h2 id="command-summary">Command Summary</h2>
<ul>
  <li>
    The <code>git-commitAll</code> command commits and pushes all changes to each repository
    in the tree. Repositories that are in a detached <code>HEAD</code> state are skipped.
  </li>
  <li>
    <p>The <code>git-evars</code> command writes a script that defines environment variables
      pointing to each git repository.</p>
  </li>
  <li>
    The <code>git-exec</code> command executes an arbitrary shell command for each repository.
  </li>
  <li>
    The <code>git-list-executables</code> command lists all the executables created by this package.
  </li>
  <li>
    The <code>git-replicate</code> command writes a script that clones the repositories in the tree,
    and adds any defined remotes.
    <ul>
      <li>
        Any git repos that have already been cloned into the target directory tree
        are skipped. This means you can rerun <code>git-replicate</code> as many times as you
        want, without ill effects.
      </li>
      <li>
        All remotes in each repository are replicated.
      </li>
    </ul>
  </li>
  <li>
    The <code>git-update</code> command updates each repository in the trees.
  </li>
</ul>
<!-- endregion -->

<h2 id="install">Installing <span class="code">git_tree_GO</span></h2>
<ol style="margin-bottom: 0;">
  <li>
    {% href label='Install the Go language' url='https://go.dev/doc/install' %}
    if you need to.
    You need Go 1.24 or later installed on your system.
    <!-- #region pre -->
    {% pre copyButton dedent %}
    {% noselect %}go version
    {% noselect go version go1.24.2 linux/amd64 %}
    {% endpre %}
    <!-- endregion -->
  </li>
  <li>
    To install the command-line programs from releases on the GitHub repository
    without manually cloning, use <code>go install</code>.
    The following provides the most recently released version:
    <!-- #region pre -->
    {% pre copyButton dedent %}
    {% noselect %}go install github.com/mslinn/git_tree_go/cmd/...@latest
    {% noselect go: downloading github.com/mslinn/git_tree_go v0.1.9
    go: downloading github.com/MakeNowJust/heredoc v1.0.0
    go: downloading github.com/ProtonMail/go-crypto v1.3.0
    go: downloading dario.cat/mergo v1.0.2
    go: downloading github.com/sergi/go-diff v1.4.0
    go: downloading github.com/pjbgf/sha1cd v0.5.0
    go: downloading golang.org/x/sys v0.37.0
    go: downloading github.com/kevinburke/ssh_config v1.4.0
    go: downloading github.com/skeema/knownhosts v1.3.2
    go: downloading golang.org/x/crypto v0.43.0
    go: downloading golang.org/x/net v0.46.0
    go: downloading github.com/cyphar/filepath-securejoin v0.5.0
    go: downloading github.com/klauspost/cpuid/v2 v2.3.0 %}
    {% endpre %}
    <!-- endregion -->
  </li>
  <li>
    Download, build and install to <code>$HOME/go/bin/</code> like this:
    <!-- #region pre -->
    {% pre copyButton dedent %}
    {% noselect %}git clone https://github.com/mslinn/git_tree_go.git
    cd git_tree_go
    make install %}
    {% endpre %}
    <!-- endregion -->
  </li>
</ol>


<!-- #region Configuration -->
<h2 id="config">Configuration</h2>
<!-- #region implicit -->
<p>
  The <code>git_tree_go</code> commands can be configured to suit your preferences.
  Settings are resolved in the following order of precedence,
  where items higher in the list override those lower down:
</p>
<ol>
  <li>Environment variables</li>
  <li>User configuration file (<code>~/.treeconfig.yml</code>)</li>
  <li>Default values built into the gem.</li>
</ol>
<p>
  This allows for flexible customization of the gem&rsquo;s behavior.
</p>
<!-- endregion -->


<!-- #region Environment Variables -->
<h3 id="envvar">Environment Variables</h3>
<p>
  For temporary overrides or use in CI/CD environments, you can use environment variables.
  They must be prefixed with <code>GIT_TREE_</code> and be in uppercase.
</p>
<ul>
  <li><code>export GIT_TREE_GIT_TIMEOUT=900</code></li>
  <li><code>export GIT_TREE_VERBOSITY=2</code></li>
  <li><code>export GIT_TREE_DEFAULT_ROOTS="dev projects personal"</code> (space-separated string)</li>
</ul>
<p>
  You can set these and use all of them like this:
</p>

<!-- #region pre -->
{% pre copyButton dedent %}
{% noselect %}GIT_TREE_GIT_TIMEOUT=900 \
GIT_TREE_VERBOSITY=2 \
GIT_TREE_DEFAULT_ROOTS="dev projects personal" \
git evars --zowee
{% endpre %}
<!-- endregion -->

<p>
  This might be more typical:
</p>
<!-- #region pre -->
{% pre copyButton dedent %}
{% noselect %}GIT_TREE_GIT_TIMEOUT=900 git evars --zowee
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Configuration File -->
<h3 id="conf">Configuration File</h3>
<p>
  The <code>git-treeconfig</code> command generates a YAML file
  (<code>~/.treeconfig.yml</code>) that you can also edit manually.
  Here is an example:
</p>

<!-- #region pre -->
{% pre copyButton dedent label="~/.treeconfig.yml" %}
git_timeout: 900
verbosity: 1
default_roots:
- projects
- personal
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Interactive Setup: git-treeconfig -->
<h3 id="inter">Interactive Setup: <span class="code">git-treeconfig</span></h3>
<p>
  The easiest way to get started is to use the <code>git-treeconfig</code> command.
  This interactive tool will ask you a few questions and create a configuration file for you at ~/.treeconfig.yml.
</p>

<!-- #region pre -->
{% pre copyButton dedent %}
{% noselect %}git-treeconfig
{% noselect Welcome to git-tree configuration.
This utility will help you create a configuration file at: /home/user/.treeconfig.yml
Press Enter to accept the default value in brackets.
Git command timeout in seconds? |300| %}600<kbd>Enter</kbd>
{% noselect Default verbosity level (0=quiet, 1=normal, 2=verbose)? |1| %}<kbd>Enter</kbd>
{% noselect Default root directories (space-separated)? |sites sitesUbuntu work| %}projects personal<kbd>Enter</kbd><br>
{% noselect Configuration saved to /home/user/.treeconfig.yml %}
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Use Cases -->
<h2 id="usecases">Use Cases</h2>

<!-- #region dependent gem Maintenance -->
<h3 id="gems">Dependent Gem Maintenance</h3>
<p>
  One of my directory trees holds Jekyll plugins, packaged as 25 gems.
  They depend on one another and must be built in a particular order.
  Sometimes an operation must be performed on all the plugins,
  and then they must all be rebuilt.
</p>
<p>
  Most operations do not require that the projects be processed in any particular order;
  however, the build process must be invoked on the dependencies first.
  It is quite tedious to do this 25 times, over and over.
</p>
<p>
  Several years ago I wrote a Bash script to perform this task, but as its requirements became more complex,
  the Bash script proved difficult to maintain.
  This use case is now fulfilled by the <code>git-exec</code> command
  provided by the <code>git_tree_go</code> gem when used with the <code>--serial</code> option.
  {% href label='See below for further details.' url='#git_exec' %}
</p>
<!-- endregion -->


<!-- #region replicate tree -->
<h3 id="replication">Replicating Trees of Git Repositories</h3>
<!-- #region implicit -->
<p>
  Whenever I set up an operating system for a new development computer,
  one of the tedious tasks that must be performed is to replicate
  the directory trees of Git repositories.
</p>
<p>
  It is a bad idea to attempt to copy an entire Git repository between computers
  because the <code>.git</code> directories within them can be huge.
  So large, in fact, that it might take much more time to copy than re-cloning.
</p>
<p>
  The reason is that copying the entire Git repository actually means copying the same information twice:
  first the <code>.git</code> hidden directory, complete with all the history for the project,
  and then again for the files in the currently checked-out branch.
  Git repos store the entire development history of the project in their <code>.git</code> directories,
  so as they accumulate history, they eventually become much larger than the
  code that is checked out at any given time.
</p>
<p>
  This use case is fulfilled by the
  {% href label='<code>git-replicate</code>' url='#git_replicate' %}
  and {% href label='<code>git-evars</code>' url='#git_evars' %} commands
  provided by <code>git_tree_go</code>.
</p>
<!-- endregion -->


<!-- #region History -->
<h4 id="history">History</h4>
<p>
  One morning I found myself facing the boring task of doing this manually once again.
  Instead, I wrote a Bash script that scanned a Git directory tree and
  wrote out another Bash script that clones the repos in the tree.
  Any additional remote references are replicated.
</p>
<p>
  Two years later, I decided to add new features to the script.
  Bash is great for short scripts,
  but it is not conducive to debugging or structured programming.
  I rewrote the bash script in Ruby, using the <code>rugged</code> gem.
  Much better!
</p>
<p>
  Two years after that, I used Google Gemini Code Assist and Claude Console to rewrite it again in Ruby,
  this time as a multithreaded program.
  Performance was lightning-fast for most use cases, but the LLMs were unable to get all the moving parts to move correctly at the same time.
  Fixing one bug would cause another bug.
  Fixing the second bug would bring back the first bug.
  LLMs have difficulty with untyped languages such as Ruby, Python and JavaScript.
</p>
<p>
  Still determined as ever, I used Google Gemini Code Assist and Claude Console to rewrite it yet again in Go.
  The core logic for the various Git-related scripts I had written over the years has evolved.
  The result is this {% href label='<code>git_tree_go</code>' url='https://github.com/mslinn/git_tree_go' %} package.
</p>
<!-- endregion -->
<!-- endregion -->
<!-- endregion -->


<!-- #region Usage -->
<h2 id="Usage" class="clear">Usage</h2>
<!-- #region implicit -->
<p>All of these commands are default to multi-processing mode using
  {% href url="https://dev.to/gophers/what-are-goroutines-and-how-are-they-scheduled-2nj3" label="goroutines" %}.
  You may notice that your computer&#39;s fan gets louder when you run these commands on large numbers of Git repositories.
</p>
<p>For builds and other sequential tasks, however, multiprocessing is inappropriate.
  Instead, it is necessary to build components in the proper order.
  Doing all the work as a single process is a straightforward way of ensuring proper task ordering.</p>
<p>Use the <code>-s/--serial</code> option when the order that Git projects are processed matters.
  All of the commands support this option.
  Execution will take much longer than without the option,
  because performing most tasks take longer to perform in sequence than performing them via multiprocessing.</p>


<h3 id="git_commitAll" class="code">git-commitAll</h3>
<p>
  The <code>git-commitAll</code> command commits and pushes all changes to each repository in the tree.
  Repositories in a detached HEAD state are skipped.
</p>
<!-- #region pre -->
{% pre copyButton dedent label="git-commitAll help message" %}
$ git commitAll -h
git-commitAll - Recursively commits and pushes changes in all git repositories
under the specified DIRECTORY roots.
If no directories are given, it uses default environment variables
('sites', 'sitesUbuntu', 'work') as roots.
Skips directories containing a .ignore file.
Repositories in a detached HEAD state are skipped.

Options:
-h, --help Show this help message and exit.
-m, --message MESSAGE Use the given string as the commit message.
(default: "-")
-q, --quiet Suppress normal output, only show errors.
-s, --serial Run tasks serially in a single thread in the order specified.
-v, --verbose Increase verbosity. Can be used multiple times (e.g., -v, -vv).
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region git-evars -->
<h3 id="git_evars" class="clear code">git-evars</h3>
<p>
  The <code>git-evars</code> command writes a script that defines environment variables pointing to each Git repository.
  This command should be run on the target computer.
</p>
<p>
  Only one parameter is required:
  an environment variable reference pointing to the top-level directory to replicate.
  The environment variable reference must be contained within single quotes to prevent expansion by the shell.
</p>
<p>
  The following appends to any script in the <code>$work</code> directory called <code>.evars</code>.
  The script defines environment variables that point to each Git repository pointed to by <code>$work</code>:
</p>
<!-- #region -->
{% pre shell %}
{% noselect %}git-evars '$work' >> $work/.evars
{% endpre %}
<!-- endregion -->


<!-- #region Generated Script -->
<h4 id="evarScript">Generated Script</h4>
<p>
  Following is a sample of environment variable definitions.
  The <code>-z</code>/<code>--zowee</code> option generates intermediate environment variable definitions,
  making them much easier to work with.
</p>
<!-- #region -->
{% pre dedent %}
{% noselect %}git-evars -z '$sites'
{% noselect export mnt=/mnt
export c=$mnt/c
export _6of26=$sites/6of26
export computers=$sites/computers.mslinn.com
export ebooks=$sites/ebooks
export expert=$sites/expert
export fonts=$sites/fonts
export intranet=$sites/intranet.ancientwarmth.com
export intranet_mslinn=$sites/intranet.mslinn.com
export jekyllTemplate=$sites/jekyllTemplate
export lyrics=$sites/lyrics
export metamusic=$sites/metamusic
export music=$sites/music.mslinn.com
export photos=$sites/photos
export supportingLiterature=$sites/supportingLiterature
export www=$sites/www.scalacourses.com %}
{% endpre %}
<!-- endregion -->

<p>
  The environment variable definitions are meant to be saved into a file that is <code>source</code>d upon boot.
  While you could place them in a file like <code>~/.bashrc</code>,
  the author&rsquo;s preference is to instead place them in <code>$work/.evars</code>
  and add the following to <code>~/.bashrc</code>:
</p>
<!-- #region -->
{% pre label='~/.bashrc snippet' %}
source "$work/.evars"
{% endpre %}
<!-- endregion -->

<p>
  Thus each time you log in, the environment variable definitions will have been re-established.
  You can therefore change directory to any of the cloned projects, like this:
</p>
<!-- #region -->
{% pre shell copyButton %}
{% noselect %}cd $git_root

{% noselect %}cd $my_project
{% endpre %}
<!-- endregion -->
<!-- endregion -->
<!-- endregion -->


<!-- #region git-exec -->
<h3 id="git_exec" class="code">git-exec</h3>
<!-- #region implicit -->
<p>
  The <code>git-exec</code> command can be run on any computer.
  The command requires two parameters.
  The first parameter indicates the directory or directories to process.
  3 forms are accepted:
</p>
<ol>
  <li>A directory name, which may be relative or absolute.</li>
  <li>
    An environment variable reference,
    which must be contained within single quotes to prevent expansion by the shell.
  </li>
  <li>
    A list of directory names, which may be relative or absolute and may contain environment variables.
  </li>
</ol>
<!-- endregion -->


<!-- #region Example 1 -->
<h4 id="exec1">Example 1</h4>
<p>
  For all specified Git repositories,
  update dependencies and install a local copy of the gem.
  The <code>--serial</code> option ensures that the gems
  will be built in the specified order.
</p>
<!-- #region -->
{% pre copyButton dedent shell %}
{% noselect %}git-exec --serial \
'$jekyll_plugin_logger
$jekyll_draft
$jekyll_plugin_support
$jekyll_all_collections
$jekyll_plugin_template
$jekyll_flexible_include_plugin
$jekyll_href
$jekyll_img
$jekyll_outline
$jekyll_plugin_template
$jekyll_pre
$jekyll_quote' \
'bundle &amp;&amp; bundle update &amp;&amp; rake install'
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Example 2 -->
<h4 id="ex2">Example 2</h4>
<p>
  Display the full path of every Git repository under the given roots:
</p>
<!-- #region pre -->
{% pre copyButton dedent %}
{% noselect %}git exec '$my_plugins' pwd
{% noselect Processing $my_plugins
Initializing 18 worker threads...
/mnt/f/work/jekyll/my_plugins/jekyll_archive_create
/mnt/f/work/jekyll/my_plugins/jekyll_archive_display
/mnt/f/work/jekyll/my_plugins/jekyll_auto_redirect
/mnt/f/work/jekyll/my_plugins/jekyll_badge
/mnt/f/work/jekyll/my_plugins/jekyll_basename_dirname
/mnt/f/work/jekyll/my_plugins/jekyll_begin_end
/mnt/f/work/jekyll/my_plugins/jekyll_bootstrap5_tabs
/mnt/f/work/jekyll/my_plugins/jekyll_download_link
/mnt/f/work/jekyll/my_plugins/jekyll_draft
/mnt/f/work/jekyll/my_plugins/jekyll_emoji_tag
/mnt/f/work/jekyll/my_plugins/jekyll_eval_filter
/mnt/f/work/jekyll/my_plugins/jekyll_flexible_include_plugin
/mnt/f/work/jekyll/my_plugins/jekyll_from_to_until
/mnt/f/work/jekyll/my_plugins/jekyll_google_translate
/mnt/f/work/jekyll/my_plugins/jekyll_href
/mnt/f/work/jekyll/my_plugins/jekyll_img
/mnt/f/work/jekyll/my_plugins/jekyll_nth
/mnt/f/work/jekyll/my_plugins/jekyll_outline
/mnt/f/work/jekyll/my_plugins/jekyll_plugin_logger
/mnt/f/work/jekyll/my_plugins/jekyll_plugin_support
/mnt/f/work/jekyll/my_plugins/jekyll_pre
/mnt/f/work/jekyll/my_plugins/jekyll_qr_generator
/mnt/f/work/jekyll/my_plugins/jekyll_quote
/mnt/f/work/jekyll/my_plugins/jekyll_random_hex
/mnt/f/work/jekyll/my_plugins/jekyll_reading_time
/mnt/f/work/jekyll/my_plugins/jekyll_run
/mnt/f/work/jekyll/my_plugins/jekyll_site_inspector
/mnt/f/work/jekyll/my_plugins/jekyll_sort_natural
/mnt/f/work/jekyll/my_plugins/jekyll_time_since
/mnt/f/work/jekyll/my_plugins/jekyll_todo
/mnt/f/work/jekyll/my_plugins/jekyll_video<br>
All work is complete. %}
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Example 3 -->
<h4 id="exec3">Example 3</h4>
<p>
  This example shows how to display the version of projects that
  create gems under the directory pointed to by <code>$my_plugins</code>.
</p>
<p>
  An executable script is required on the <code>PATH</code>, so <code>git-exec</code>
  can invoke it as it loops through the subdirectories.
  I call this script <code>version</code>, and it is written in <code>bash</code>,
  although the language used is not significant:
</p>
{% flexible_include copyButton download pre file='$mslinn_bin/misc/version' label="version" %}

<p style="margin-top: 1em;">
  Call it like this:
</p>
<!-- #region -->
{% pre copyButton dedent shell %}
{% noselect %}git-exec '$my_plugins' version
{% noselect jekyll_all_collections v0.3.3
jekyll_archive_create v1.0.2
jekyll_archive_display v1.0.1
jekyll_auto_redirect v0.1.0
jekyll_basename_dirname v1.0.3
jekyll_begin_end v1.0.1
jekyll_bootstrap5_tabs v1.1.2
jekyll_context_inspector v1.0.1
jekyll_download_link v1.0.1
jekyll_draft v1.1.2
jekyll_flexible_include_plugin v2.0.20
jekyll_from_to_until v1.0.3
jekyll_href v1.2.5
jekyll_img v0.1.5
jekyll_nth v1.1.0
jekyll_outline v1.2.0
jekyll_pdf v0.1.0
jekyll_plugin_logger v2.1.1
jekyll_plugin_support v0.7.0
jekyll_plugin_template v0.3.0
jekyll_pre v1.4.1
jekyll_quote v0.4.0
jekyll_random_hex v1.0.0
jekyll_reading_time v1.0.0
jekyll_revision v0.1.0
jekyll_run v1.0.1
jekyll_site_inspector v1.0.0
jekyll_sort_natural v1.0.0
jekyll_time_since v0.1.3 %}
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region Example 4 -->
<h4 id="exec4">Example 4</h4>
<p>
  List the projects under the directory pointed to by <code>$my_plugins</code>
  that have a <code>demo/</code> subdirectory:
</p>
<!-- #region -->
{% pre copyButton dedent shell %}
{% noselect %}git-exec '$my_plugins' \
'if [ -d demo ]; then realpath demo; fi'
{% noselect /mnt/c/work/jekyll/my_plugins/jekyll-hello/demo
/mnt/c/work/jekyll/my_plugins/jekyll_all_collections/demo
/mnt/c/work/jekyll/my_plugins/jekyll_archive_create/demo
/mnt/c/work/jekyll/my_plugins/jekyll_download_link/demo
/mnt/c/work/jekyll/my_plugins/jekyll_draft/demo
/mnt/c/work/jekyll/my_plugins/jekyll_flexible_include_plugin/demo
/mnt/c/work/jekyll/my_plugins/jekyll_from_to_until/demo
/mnt/c/work/jekyll/my_plugins/jekyll_href/demo
/mnt/c/work/jekyll/my_plugins/jekyll_img/demo
/mnt/c/work/jekyll/my_plugins/jekyll_outline/demo
/mnt/c/work/jekyll/my_plugins/jekyll_pdf/demo
/mnt/c/work/jekyll/my_plugins/jekyll_plugin_support/demo
/mnt/c/work/jekyll/my_plugins/jekyll_plugin_template/demo
/mnt/c/work/jekyll/my_plugins/jekyll_pre/demo
/mnt/c/work/jekyll/my_plugins/jekyll_quote/demo
/mnt/c/work/jekyll/my_plugins/jekyll_revision/demo
/mnt/c/work/jekyll/my_plugins/jekyll_time_since/demo %}
{% endpre %}
<!-- endregion -->
<!-- endregion -->

<h3 id="git_list_executables" class="code">git-list-executables</h3>
<p>
  The <code>git-list-executables</code> command lists all the executables created by this package.
</p>
<!-- #region pre -->
{% pre copyButton dedent label="git-list-executables help message" %}
$ git-list-executables -h
git-list-executables - Lists executables installed by git-tree-go.

Usage: git-list-executables [OPTIONS]

OPTIONS:
-h, --help Show this help message and exit.
{% endpre %}
<!-- endregion -->

<!-- #region pre -->
{% pre copyButton dedent %}
{% noselect %}git-list-executables
{% noselect Executables installed by git-tree-go in: /mnt/f/work/git/git_tree_go/bin

git-commitAll: Commit all changes in the current repository.
git-evars: Lists all environment variables used by git.
git-exec: Execute a command in each repository of the tree.
git-list-executables: Lists executables installed by git-tree-go.
git-replicate: Replicate a git repository.
git-treeconfig: Manage the git-tree configuration.
git-update: Update all repositories in the tree. %}
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region git-replicate -->
<h3 id="git_replicate" class="code">git-replicate</h3>
<p>
  This command generates a shell script to replicate a tree of Git repositories.
  ROOTS can be directory names or environment variable references (e.g., '$work').
  Multiple roots can be specified in a single quoted string.
</p>
<!-- #region -->
{% pre shell %}
{% noselect %}git-replicate '$work' > work.sh # Replicate repos under $work
{% noselect %}git-replicate '$work $sites' > replicate.sh # Replicate repos under $work and $sites
{% endpre %}
<!-- endregion -->
<p>
  The generated environment variables will all be relative to the
  path pointed to by the expanded environment variable that you provided.
  You will understand what this means once you look at the generated script.
</p>
<p>
  When <code>git-replicate</code> completes,
  edit the generated script to suit, then
  copy it to the target machine and run it.
  The following example copies the script to <code>machine2</code> and runs it:
</p>
<!-- #region -->
{% pre shell %}
{% noselect %}scp work.sh machine2:

{% noselect %}ssh machine2 work.sh
{% endpre %}
<!-- endregion -->

<h4 id="replicateScript">Generated Script</h4>
<p>
  Following is a sample of one section, which is repeated for every Git
  repository that is processed.
</p>
<!-- #region -->
{% pre dedent %}
if [ ! -d "sinatra/sinatras-skeleton/.git" ]; then
mkdir -p 'sinatra'
pushd 'sinatra' > /dev/null
git clone git@github.com:mslinn/sinatras-skeleton.git
git remote add upstream 'https://github.com/simonneutert/sinatras-skeleton.git'
popd > /dev/null
fi
{% endpre %}
<!-- endregion -->
<!-- endregion -->


<!-- #region git-update -->
<h3 id="git_update" class="code">git-update</h3>
<p>
  The <code>git-update</code> command updates each repository in the tree.
</p>
<p>
  {% href match label='This command has its own article.' url='update-repos.html' %}
</p>
<!-- endregion -->
<!-- endregion -->


<!-- #region Development -->
<h2 id="development">Development</h2>
<p>
  See {% href label='DEVELOPMENT.md' url='DEVELOPMENT.md' %}.
</p><!-- endregion -->


<!-- #region Contributing -->
<h2 id="contributing">Contributing</h2>
<ol>
  <li>Fork the project</li>
  <li>Create a descriptively named feature branch</li>
  <li>Add your feature</li>
  <li>Submit a pull request</li>
</ol>
<!-- endregion -->


<!-- #region License -->
<h2 id="license">License</h2>
<p>
  The package is available as open source under the terms of the
  {% href label='MIT License' url='https://opensource.org/licenses/MIT' %}.
</p>
<!-- endregion -->
